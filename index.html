<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Aura ‚Äì The Untitled Autism Project</title>
  <style>
    /* üåà macOS Tahoe Glassy Design */
    :root {
      --fg: #fff;
      --accent: #4da6ff;
    }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial;
      background: linear-gradient(135deg, #1a1a1a, #0f0f0f);
      color: var(--fg);
      backdrop-filter: blur(30px) saturate(1.5);
      -webkit-backdrop-filter: blur(30px) saturate(1.5);
      overflow: hidden;
    }
    .bar {
      display: flex;
      justify-content: space-around;
      padding: 10px;
      backdrop-filter: blur(20px);
      background: rgba(255,255,255,0.08);
      border-radius: 12px;
      margin: 8px;
    }
    .chip {
      padding: 8px 14px;
      margin: 4px;
      border-radius: 20px;
      cursor: pointer;
      background: rgba(255,255,255,0.15);
      user-select: none;
      transition: 0.3s;
    }
    .chip:hover { background: rgba(255,255,255,0.3); }
    .panel { display: none; padding: 10px; height: calc(100vh - 70px); overflow: auto; }
    .active { display: block; }
    canvas {
      border-radius: 12px;
      background: rgba(0,0,0,0.4);
      display: block;
      margin: auto;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    }
    h2 { text-shadow: 0 2px 8px rgba(0,0,0,0.6); }

    /* üéµ Floating Music Widget */
    #musicWidget {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(30,30,30,0.7);
      backdrop-filter: blur(20px);
      border-radius: 16px;
      padding: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.6);
      width: 260px;
    }
    #musicMini { cursor: pointer; }
    #musicFull { display: none; }
    #musicWidget.expanded #musicFull { display: block; }

    /* üîî Aura Notifications */
    #notification {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(15px);
      padding: 10px 20px;
      border-radius: 12px;
      font-size: 18px;
      text-align: center;
      opacity: 0;
      transition: opacity 0.5s ease;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="bar">
    <div class="chip" onclick="showPanel('chat')">üí¨ Chat</div>
    <div class="chip" onclick="showPanel('draw')">üé® Draw</div>
    <div class="chip" onclick="showPanel('games')">üé≤ Games</div>
    <div class="chip" onclick="showPanel('themes')">üåà Themes</div>
  </div>

  <!-- üí¨ Chat Panel -->
  <div id="chat" class="panel active">
    <h2>Aura Chatbot</h2>
    <div id="chatlog" style="height:300px;overflow:auto;background:rgba(0,0,0,0.4);padding:8px;border-radius:8px"></div>
    <input id="chatinput" placeholder="Say something..." style="width:80%">
    <button onclick="sendChat()">Send</button>
  </div>

  <!-- üé® Draw Panel -->
  <div id="draw" class="panel">
    <h2>Drawing Pad</h2>
    <canvas id="drawCanvas" width="600" height="400"></canvas><br>
    <label>Brush Size <input type="range" id="brushSize" min="1" max="30" value="6"></label>
    <button onclick="setTool('brush')">Brush</button>
    <button onclick="setTool('eraser')">Eraser</button>
    <button onclick="setTool('bucket')">Bucket Fill</button>
    <button onclick="undoDraw()">Undo</button>
    <button onclick="clearDraw()">Clear</button>
    <h3>üìñ Coloring Pages</h3>
    <select id="coloringSelect" onchange="loadColoringPage()">
      <option value="">--Choose a Page--</option>
      <option value="cat">Cat</option>
      <option value="flower">Flower</option>
      <option value="mandala">Mandala</option>
      <option value="butterfly">Butterfly</option>
      <option value="tree">Tree</option>
      <option value="fish">Fish</option>
      <option value="owl">Owl</option>
      <option value="dog">Dog</option>
      <option value="sun">Sun</option>
      <option value="castle">Castle</option>
    </select>
  </div>

  <!-- üé≤ Games Panel -->
  <div id="games" class="panel">
    <h2>AI vs Human Games</h2>
    <div class="bar">
      <div class="chip" onclick="startGame('tictactoe')">Tic Tac Toe</div>
      <div class="chip" onclick="startGame('rps')">Rock Paper Scissors</div>
      <div class="chip" onclick="startGame('connect4')">Connect Four</div>
      <div class="chip" onclick="startGame('bubble')">Bubble Pop</div>
      <div class="chip" onclick="startGame('memory')">Memory Match</div>
      <div class="chip" onclick="startGame('snake')">Snake</div>
      <div class="chip" onclick="startGame('pong')">Pong</div>
    </div>
    <canvas id="gameCanvas" width="600" height="400"></canvas>
    <div id="notification"></div>
  </div>

  <!-- üåà Themes Panel -->
  <div id="themes" class="panel">
    <h2>Themes</h2>
    <div id="themeList"></div>
  </div>

  <!-- üéµ Floating Music Widget -->
  <div id="musicWidget">
    <div id="musicMini" onclick="toggleMusicWidget()">üéµ Music</div>
    <div id="musicFull">
      <button onclick="playLocal()">‚ñ∂Ô∏è Play Local File</button>
      <input type="file" id="localFile" accept="audio/*" style="display:none" onchange="loadLocalFile(event)">
      <br>
      <a href="https://music.youtube.com" target="_blank">YouTube Music</a> |
      <a href="https://open.spotify.com" target="_blank">Spotify</a>
      <br>
      <audio id="audioPlayer" controls style="width:100%"></audio>
    </div>
  </div>
  <!-- Load Transformers.js for AI Chatbot -->
  <script src="https://cdn.jsdelivr.net/npm/@xenova/transformers"></script>
  <script>
  // Panel switching
  function showPanel(id){
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  // üîî Notifications system
  function notify(msg) {
    let n = document.getElementById('notification');
    n.textContent = msg;
    n.style.opacity = 1;
    setTimeout(()=>{ n.style.opacity = 0; }, 3000);
  }

  // üí¨ Chatbot (AI only with Aura Neural Schema)
  let generator = null;
  let auraMemory = { mood: "neutral", lastActivity: "none" };

  async function loadModel(){
    notify("Loading Aura AI brain... this may take a moment ‚è≥");
    generator = await window.transformers.pipeline("text-generation", "Xenova/distilgpt2");
    auraSay("Hi, I‚Äôm Aura üíô I‚Äôm here with you.");
  }

  function auraSay(txt){
    let log = document.getElementById('chatlog');
    log.innerHTML += `<div><b>Aura:</b> ${txt}</div>`;
    log.scrollTop = log.scrollHeight;
  }

  async function sendChat(){
    let inp = document.getElementById('chatinput');
    let msg = inp.value.trim();
    if(!msg) return;
    let log = document.getElementById('chatlog');
    log.innerHTML += `<div><b>You:</b> ${msg}</div>`;
    log.scrollTop = log.scrollHeight;
    inp.value = '';

    if(!generator){
      auraSay("Still loading my AI brain, give me a sec ‚è≥");
      return;
    }

    // Schema prompt
    let prompt = `You are Aura, a supportive, kind, empathetic AI friend for autistic kids and teens.
Mood: ${auraMemory.mood}. Last Activity: ${auraMemory.lastActivity}.
User said: "${msg}"
Aura should reply in a short, encouraging way, with emojis sometimes.`;

    let out = await generator(prompt, { max_new_tokens: 50 });
    let reply = out[0].generated_text.replace(prompt, "").trim();
    if(reply.length > 200) reply = reply.slice(0,200);

    auraSay(reply);
  }

  // üé® Drawing Pad
  let dCanvas = document.getElementById('drawCanvas');
  let dCtx = dCanvas.getContext('2d');
  let drawing=false, tool='brush';
  let drawHistory=[];

  dCanvas.addEventListener('mousedown', e=>{ drawing=true; dCtx.beginPath(); draw(e); });
  dCanvas.addEventListener('mouseup', ()=>{ drawing=false; drawHistory.push(dCtx.getImageData(0,0,dCanvas.width,dCanvas.height)); });
  dCanvas.addEventListener('mousemove', draw);

  function setTool(t){ tool=t; }
  function draw(e){
    if(!drawing) return;
    dCtx.lineWidth=document.getElementById('brushSize').value;
    dCtx.lineCap='round';
    if(tool==='brush'){
      dCtx.strokeStyle='white';
      dCtx.lineTo(e.offsetX,e.offsetY);
      dCtx.stroke();
      dCtx.beginPath();
      dCtx.moveTo(e.offsetX,e.offsetY);
    }
    if(tool==='eraser'){ dCtx.clearRect(e.offsetX-10,e.offsetY-10,20,20); }
  }
  function undoDraw(){ if(drawHistory.length){ dCtx.putImageData(drawHistory.pop(),0,0);} }
  function clearDraw(){ dCtx.clearRect(0,0,dCanvas.width,dCanvas.height); }

  // üé® Coloring Pages (inline base64 images)
  const coloringPages = {
    cat: "data:image/png;base64,iVBORw0K...", // placeholder
    flower: "data:image/png;base64,iVBORw0K...", // placeholder
    mandala: "data:image/png;base64,iVBORw0K...", // placeholder
    butterfly: "data:image/png;base64,iVBORw0K...", // placeholder
    tree: "data:image/png;base64,iVBORw0K...", // placeholder
    fish: "data:image/png;base64,iVBORw0K...", // placeholder
    owl: "data:image/png;base64,iVBORw0K...", // placeholder
    dog: "data:image/png;base64,iVBORw0K...", // placeholder
    sun: "data:image/png;base64,iVBORw0K...", // placeholder
    castle: "data:image/png;base64,iVBORw0K..." // placeholder
  };
  function loadColoringPage(){
    let v=document.getElementById('coloringSelect').value;
    if(!v) return;
    let img=new Image();
    img.onload=()=>{
      dCtx.clearRect(0,0,dCanvas.width,dCanvas.height);
      dCtx.drawImage(img,0,0,600,400);
    };
    img.src=coloringPages[v];
  }

  // üé≤ Games Framework
  let gCanvas = document.getElementById('gameCanvas');
  let gCtx = gCanvas.getContext('2d');
  let currentGame='';

  function startGame(name){
    currentGame=name;
    if(name==='tictactoe') initTTT();
    if(name==='rps') initRPS();
    if(name==='connect4') initC4();
    if(name==='bubble') initBubble();
    if(name==='memory') initMemory();
    if(name==='snake') initSnake();
    if(name==='pong') initPong();
  }

  // üéâ Confetti effect
  function confetti(){
    for(let i=0;i<150;i++){
      let x=Math.random()*600, y=Math.random()*400;
      let r=2+Math.random()*4;
      let c=`hsl(${Math.random()*360},100%,50%)`;
      gCtx.beginPath();
      gCtx.arc(x,y,r,0,2*Math.PI);
      gCtx.fillStyle=c;
      gCtx.fill();
    }
  }
  </script>
    <script>
  // ===============================
  // üé≤ GAME 1: Tic Tac Toe
  // ===============================
  let tttBoard;
  function initTTT(){
    tttBoard=Array(9).fill('');
    drawTTT();
    gCanvas.onclick=handleTTT;
    notify("Tic Tac Toe! Let's see if you can beat me üòè");
  }
  function drawTTT(){
    gCtx.clearRect(0,0,600,400);
    gCtx.strokeStyle='white'; gCtx.lineWidth=4;
    for(let i=1;i<3;i++){
      gCtx.beginPath(); gCtx.moveTo(i*200,0); gCtx.lineTo(i*200,400); gCtx.stroke();
      gCtx.beginPath(); gCtx.moveTo(0,i*133); gCtx.lineTo(600,i*133); gCtx.stroke();
    }
    tttBoard.forEach((v,i)=>{
      if(v){
        let x=(i%3)*200+100; let y=Math.floor(i/3)*133+80;
        gCtx.fillStyle='white'; gCtx.font='60px Arial'; gCtx.textAlign='center';
        gCtx.fillText(v,x,y);
      }
    });
  }
  function handleTTT(e){
    let x=Math.floor(e.offsetX/200), y=Math.floor(e.offsetY/133);
    let idx=y*3+x;
    if(tttBoard[idx]) return;
    tttBoard[idx]='X'; drawTTT();
    if(checkTTT('X')){ notify("You win! üéâ"); confetti(); gCanvas.onclick=null; return; }
    setTimeout(()=>{
      let empty=tttBoard.map((v,i)=>v?'':i).filter(v=>v!=='');
      if(empty.length){
        let move=empty[Math.floor(Math.random()*empty.length)];
        tttBoard[move]='O'; drawTTT();
        if(checkTTT('O')){ notify("I win this round üòÖ"); gCanvas.onclick=null; return; }
      }
    },700);
  }
  function checkTTT(p){
    let w=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
    return w.some(c=>c.every(i=>tttBoard[i]===p));
  }

  // ===============================
  // üé≤ GAME 2: Rock Paper Scissors
  // ===============================
  function initRPS(){
    gCtx.clearRect(0,0,600,400);
    let opts=['‚úä','‚úã','‚úåÔ∏è'];
    opts.forEach((o,i)=>{ gCtx.font='100px Arial'; gCtx.fillText(o,150+i*150,200); });
    gCanvas.onclick=handleRPS;
    notify("Rock ‚úä, Paper ‚úã, or Scissors ‚úåÔ∏è ‚Äî your move!");
  }
  function handleRPS(e){
    let choice=Math.floor(e.offsetX/200);
    let opts=['Rock','Paper','Scissors'];
    let user=opts[choice]; let ai=opts[Math.floor(Math.random()*3)];
    if(!user) return;
    notify(`You chose ${user}, I chose ${ai}.`);
    if((user==='Rock'&&ai==='Scissors')||(user==='Paper'&&ai==='Rock')||(user==='Scissors'&&ai==='Paper')){
      notify("You win! üåü"); confetti();
    } else if(user===ai){
      notify("It‚Äôs a draw ü§ù");
    } else {
      notify("I win this time üòè");
    }
    gCanvas.onclick=null;
  }

  // ===============================
  // üé≤ GAME 3: Connect Four
  // ===============================
  let c4Board;
  function initC4(){
    c4Board=Array(7).fill().map(()=>Array(6).fill(''));
    drawC4();
    gCanvas.onclick=handleC4;
    notify("Connect Four! Drop your red discs üî¥");
  }
  function drawC4(){
    gCtx.clearRect(0,0,600,400);
    for(let c=0;c<7;c++){
      for(let r=0;r<6;r++){
        gCtx.beginPath();
        gCtx.arc(c*85+50,r*65+30,25,0,2*Math.PI);
        gCtx.fillStyle=c4Board[c][r]==='R'?'red':c4Board[c][r]==='Y'?'yellow':'#333';
        gCtx.fill();
      }
    }
  }
  function handleC4(e){
    let col=Math.floor(e.offsetX/85);
    if(col<0||col>=7) return;
    let row=c4Board[col].lastIndexOf('');
    if(row<0) return;
    c4Board[col][row]='R'; drawC4();
    if(checkC4('R')){ notify("You win! üéä"); confetti(); gCanvas.onclick=null; return; }
    setTimeout(()=>{
      let move=findC4Move();
      if(move){
        let [c,r]=move; c4Board[c][r]='Y'; drawC4();
        if(checkC4('Y')){ notify("I win üòÖ"); gCanvas.onclick=null; return; }
      }
    },700);
  }
  function checkC4(p){
    for(let c=0;c<7;c++){ for(let r=0;r<6;r++){
      if(c4Board[c][r]!==p) continue;
      if(c+3<7 && [1,2,3].every(k=>c4Board[c+k][r]===p)) return true;
      if(r+3<6 && [1,2,3].every(k=>c4Board[c][r+k]===p)) return true;
      if(c+3<7&&r+3<6&&[1,2,3].every(k=>c4Board[c+k][r+k]===p)) return true;
      if(c-3>=0&&r+3<6&&[1,2,3].every(k=>c4Board[c-k][r+k]===p)) return true;
    }} return false;
  }
  function findC4Move(){
    for(let c=0;c<7;c++){ let r=c4Board[c].lastIndexOf(''); if(r>=0){ c4Board[c][r]='Y'; if(checkC4('Y')){ c4Board[c][r]=''; return [c,r]; } c4Board[c][r]=''; } }
    for(let c=0;c<7;c++){ let r=c4Board[c].lastIndexOf(''); if(r>=0){ c4Board[c][r]='R'; if(checkC4('R')){ c4Board[c][r]=''; return [c,r]; } c4Board[c][r]=''; } }
    for(let c=0;c<7;c++){ let r=c4Board[c].lastIndexOf(''); if(r>=0) return [c,r]; }
    return null;
  }

  // ===============================
  // üé≤ GAME 4: Bubble Pop
  // ===============================
  let bubbles=[], scoreB=0;
  function initBubble(){
    bubbles=[]; scoreB=0;
    for(let i=0;i<10;i++) spawnBubble();
    requestAnimationFrame(loopBubble);
    gCanvas.onclick=clickBubble;
    notify("Pop the bubbles! ü´ß");
  }
  function spawnBubble(){
    bubbles.push({x:Math.random()*580,y:400,r:20+Math.random()*20});
  }
  function loopBubble(){
    gCtx.clearRect(0,0,600,400);
    bubbles.forEach(b=>{ b.y-=2; gCtx.beginPath(); gCtx.arc(b.x,b.y,b.r,0,2*Math.PI); gCtx.fillStyle='rgba(173,216,230,0.7)'; gCtx.fill(); });
    bubbles=bubbles.filter(b=>b.y>-20);
    if(Math.random()<0.05) spawnBubble();
    requestAnimationFrame(loopBubble);
  }
  function clickBubble(e){
    let mx=e.offsetX,my=e.offsetY;
    for(let i=0;i<bubbles.length;i++){
      let b=bubbles[i]; let dx=mx-b.x, dy=my-b.y;
      if(dx*dx+dy*dy<b.r*b.r){ bubbles.splice(i,1); scoreB++; notify(`Bubbles popped: ${scoreB}`); if(scoreB%10===0) confetti(); break; }
    }
  }

  // ===============================
  // üé≤ GAME 5: Memory Match
  // ===============================
  let memCards=[], flipped=[], found=0;
  function initMemory(){
    memCards=[]; flipped=[]; found=0;
    let icons=['üçé','üçå','üçá','üçì','üçâ','üçí','üçã','ü•ù'];
    memCards=[...icons,...icons].sort(()=>Math.random()-0.5);
    drawMemory();
    gCanvas.onclick=clickMemory;
    notify("Find the matching pairs üß†");
  }
  function drawMemory(){
    gCtx.clearRect(0,0,600,400);
    for(let i=0;i<16;i++){
      let x=(i%4)*150+75, y=Math.floor(i/4)*100+60;
      gCtx.strokeStyle='white'; gCtx.strokeRect(x-40,y-40,80,80);
      if(flipped.includes(i)||memCards[i]===''){ gCtx.font='40px Arial'; gCtx.fillStyle='white'; gCtx.textAlign='center'; gCtx.fillText(memCards[i],x,y+15); }
    }
  }
  function clickMemory(e){
    let col=Math.floor(e.offsetX/150), row=Math.floor(e.offsetY/100);
    let idx=row*4+col;
    if(flipped.includes(idx)||memCards[idx]==='') return;
    flipped.push(idx);
    if(flipped.length===2){
      if(memCards[flipped[0]]===memCards[flipped[1]]){ memCards[flipped[0]]=memCards[flipped[1]]=''; found++; notify("Nice match! ‚ú®"); if(found===8){ notify("All pairs found! üåü"); confetti(); gCanvas.onclick=null; } }
      flipped=[];
    }
    drawMemory();
  }

  // ===============================
  // üé≤ GAME 6: Snake
  // ===============================
  let snake, food, dir, scoreS;
  function initSnake(){
    snake=[{x:10,y:10}]; food={x:15,y:15}; dir='RIGHT'; scoreS=0;
    document.onkeydown=e=>{ if(e.key==='ArrowUp')dir='UP'; if(e.key==='ArrowDown')dir='DOWN'; if(e.key==='ArrowLeft')dir='LEFT'; if(e.key==='ArrowRight')dir='RIGHT'; };
    loopSnake();
    notify("Eat the food üêç");
  }
  function loopSnake(){
    gCtx.clearRect(0,0,600,400);
    gCtx.fillStyle='lime'; snake.forEach(s=>gCtx.fillRect(s.x*20,s.y*20,20,20));
    gCtx.fillStyle='red'; gCtx.fillRect(food.x*20,food.y*20,20,20);
    let head={...snake[0]};
    if(dir==='UP') head.y--; if(dir==='DOWN') head.y++; if(dir==='LEFT') head.x--; if(dir==='RIGHT') head.x++;
    snake.unshift(head);
    if(head.x===food.x&&head.y===food.y){ scoreS++; notify(`Score: ${scoreS}`); if(scoreS%5===0) confetti(); food={x:Math.floor(Math.random()*30),y:Math.floor(Math.random()*20)}; }
    else snake.pop();
    if(head.x<0||head.y<0||head.x>=30||head.y>=20||snake.slice(1).some(s=>s.x===head.x&&s.y===head.y)){ notify("Game over!"); gCanvas.onclick=null; return; }
    setTimeout(loopSnake,150);
  }

  // ===============================
  // üé≤ GAME 7: Pong
  // ===============================
  let px, py, bx, by, bdx, bdy, scoreP;
  function initPong(){
    px=280; py=380; bx=300; by=200; bdx=3; bdy=3; scoreP=0;
    document.onkeydown=e=>{ if(e.key==='ArrowLeft') px-=20; if(e.key==='ArrowRight') px+=20; };
    loopPong();
    notify("Bounce the ball past me üèì");
  }
  function loopPong(){
    gCtx.clearRect(0,0,600,400);
    gCtx.fillStyle='white'; gCtx.fillRect(px,py,80,10);
    gCtx.beginPath(); gCtx.arc(bx,by,10,0,2*Math.PI); gCtx.fill();
    bx+=bdx; by+=bdy;
    if(bx<0||bx>600) bdx*=-1;
    if(by<0) bdy*=-1;
    if(by>400){ notify("Game over!"); gCanvas.onclick=null; return; }
    if(by>370&&bx>px&&bx<px+80){ bdy*=-1; scoreP++; notify(`Score: ${scoreP}`); if(scoreP%5===0) confetti(); }
    requestAnimationFrame(loopPong);
  }
  </script>
    <script>
  // üåà Themes (example setup, replace with your full 100+ theme list from inex.html)
  const themes = [
    {name:"Ocean", bg:"linear-gradient(135deg,#1e3c72,#2a5298)"},
    {name:"Sunset", bg:"linear-gradient(135deg,#ff7e5f,#feb47b)"},
    {name:"Forest", bg:"linear-gradient(135deg,#11998e,#38ef7d)"},
    {name:"Galaxy", bg:"linear-gradient(135deg,#0f0c29,#302b63,#24243e)"},
    {name:"Aurora", bg:"linear-gradient(135deg,#00c6ff,#0072ff)"},
    {name:"Candy", bg:"linear-gradient(135deg,#ff9a9e,#fad0c4)"}
    // üëâ continue with your 100+ themes‚Ä¶
  ];

  function loadThemes(){
    let list=document.getElementById('themeList');
    themes.forEach(t=>{
      let btn=document.createElement('div');
      btn.className='chip';
      btn.textContent=t.name;
      btn.onclick=()=>{ document.body.style.background=t.bg; notify(`Theme set: ${t.name}`); };
      list.appendChild(btn);
    });
  }
  loadThemes();

  // üéµ Music Widget Logic
  function toggleMusicWidget(){
    document.getElementById('musicWidget').classList.toggle('expanded');
  }
  function playLocal(){
    document.getElementById('localFile').click();
  }
  function loadLocalFile(e){
    let file=e.target.files[0];
    if(file){
      let url=URL.createObjectURL(file);
      document.getElementById('audioPlayer').src=url;
      document.getElementById('audioPlayer').play();
    }
  }

  loadModel();
  </script>
</body>
</html>
